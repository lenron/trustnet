<!DOCTYPE HTML>
<html>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<body>
	<label>Computed mnemonic:</label>
	<input type='text' id='computed_mnemonic' style='width: 700px;'></input>
	<input type='button' id='compute_mnemonic' onclick='compute_mnemonic()' value='Compute Mnemonic'></input><br><br>
	<label>Enter mnemonic:</label>
	<input type='text' id='mnemonic' style='width: 700px;'></input><br>
	<label>Enter password:</label>
	<input type='text' id='password'></input>
	<input type='button' id='go_mnemonic' onclick='install_user_keytree()' value='Save Mnemonic'></input><br><br>
	<label>Enter message:</label>
	<input type='text' id='message'></input>
	<input type='button' id='go_message' onclick='send_message()' value='Send Message'></input><br>

<script src="js_include_files/wordlist_english.js"></script>
<script src="js_include_files/crypto.js"></script>
<script src="js_include_files/noble-secp256k1.js"></script>
<script src="js_include_files/noble-ripemd160.js"></script>
<script>
// Ability check
console.log('test mnemonic word list: ' + wordListArray[1])
// objects to use 3rd party functions
let secp = nobleSecp256k1;
let noble = nobleHashes;

//install_user_keytree();
async function install_user_keytree(){
	const mnemonic = document.getElementById('mnemonic').value;
	const password = document.getElementById('password').value;
	// test mnemonic validity console.log error phrases to be handled differently.
    if( await verifyMnemonicPhrase(mnemonic) ){
		console.log('Mnemonic verified.');
		const seed = await computeSeed512(mnemonic, password);
		console.log('computed seed: ' + seed);
		// Save seed in browser 
		if (typeof(Storage) !== "undefined") {
			if (localStorage.seed) {
				console.log('Overwriting previously saved seed. Old seed: ' + localStorage.seed);
				localStorage.seed = seed;
			} else {
				console.log('Saving seed for the first time.');
				localStorage.seed = seed;
			}
			 "You have clicked the button " + localStorage.clickcount + " time(s).";
		} else {
			console.log("Sorry, your browser does not support web storage...");
		}
    }else if( mnemonic.split(' ').length != 12){
        console.log('This generator only takes mnemonic sentences of 12 words.');
    }else{
        console.log('Mnemonic sentence INVALID! Please enter a valid phrase');
    }




}

async function compute_mnemonic(){
	const computed_mnemonic = await computeMnemonicPhrase();
	document.getElementById('computed_mnemonic').value = computed_mnemonic;
}

</script>

</body>

</html>
