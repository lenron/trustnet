Getting website up and working

Git Repository:
sudo apt install git
git clone https://github.com/lenron/trustnet.git

MariaDB:

Install mariadb:
 sudo apt install mariadb-server
Login:
 sudo mariadb
Create root password:
 SET PASSWORD FOR 'root'@'localhost' = PASSWORD('password');
Login as root:
 mariadb -u root -p
Create website user:
 CREATE USER 'chatriwe_admin'@'localhost';
Set website user password:
 SET PASSWORD FOR 'chatriwe_admin'@'localhost' =PASSWORD('Vuu_fQY1#qH,');
Grant website user database privileges:
 GRANT ALL PRIVILEGES ON *.* TO 'chatriwe_admin'@'localhost';
Login as user:
 mariadb -u chatriwe_admin -p
Create database:
 CREATE DATABASE chatriwe_obf;
Create table:
 USE chatriwe_obf;
 CREATE TABLE IF NOT EXISTS obfuscation (fingerprint VARCHAR(64), data VARCHAR(1000), ip VARCHAR(16), timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY(fingerprint) );

 
Perl

Install perl dependencies
 sudo apt-get install libmysqlclient-dev
 sudo apt install cpanminus

Install Perl modules
 sudo cpanm DBD::MariaDB
 sudo cpanm DBI
 sudo cpanm CGI
 sudo cpanm Time::Piece
 sudo cpanm URI::Escape
 sudo cpanm JSON

Create directory structure and symbolic link to Perl executable mirroring website’s
 sudo mkdir -p /home/chatriwe/perl5/perlbrew/perls/perl-5.10.1/bin
 sudo ln -s /usr/bin/perl /home/chatriwe/perl5/perlbrew/perls/perl-5.10.1/bin/perl5.10.1


Install Apache & Enable Modules

Install Apache:
 sudo apt install apache2

Add the Apache user www-data to current User group:
 sudo adduser www-data $USER
Run CGI module:
 sudo a2enmod cgid
Enable the Apache Rewrite Engine so that Rewrites don’t crash server:
 sudo a2enmod rewrite
Enable other modules for .htaccess file to run:
 sudo a2enmod headers
 sudo a2enmod expires
Ensure CGI scripts have correct permissions:
 sudo chmod 755 *.pl

Modify Apache .conf files:
·	Make sure to change  <user> or <maker> to YOUR working user.

Change document root folder:
 sudo vi /etc/apache2/sites-available/000-default.conf
 Replace:
	DocumentRoot /var/www/html
 With:
	DocumentRoot /home/<user>/trustnet/aes256cbc

Add local website folder to config file:
 sudo vi /etc/apache2/apache2.conf
 Replace: 
	<Directory /var/www/>
			Options Indexes FollowSymLinks
			AllowOverride None
			Require all granted
	</Directory>
 With:
	<Directory /home/<user>/trustnet/aes256cbc/>
		Options Indexes FollowSymLinks
		AddHandler cgi-script .cgi .pl
		AllowOverride All
		Require all granted
	</Directory>

Edit CGI configuration file:
 sudo vi /etc/apache2/conf-enabled/serve-cgi-bin.conf
 Replace:
	ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
	<Directory "/usr/lib/cgi-bin">
		AllowOverride None
		Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
		Order allow,deny
		Allow from all
	</Directory>
 With:
	ScriptAlias /cgi-bin/ /home/<user>/trustnet/aes256cbc/
	<Directory "/home/<user>/trustnet/aes256cbc/">
			AllowOverride All
			Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
			AddHandler cgi-script .pl
			Require all granted
	</Directory>

Restart Apache:
sudo systemctl restart apache2



Should now be working!



