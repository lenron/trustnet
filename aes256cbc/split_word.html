<!DOCTYPE HTML>
<html>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<body>
<script src="annotated.js"></script>
<script>

byte_array = new Array(255, 254, 253,  100, 64, 1, 0, 17);
console.log("byte array: " + byte_array);

words = byteToWord( byte_array );
console.log("words: " + words);
bytes = wordToByte( words );
console.log("bytes: " + bytes);

// test b58
b58_bytes = to_b58(bytes);
console.log("b58 on bytes: " + b58_bytes);
bytes = from_b58(b58_bytes);
console.log("bytes from b58: " + bytes);

b58_words = to_b58_words(words);
console.log("b58 on words: " + b58_words);
words = from_b58_words(b58_words);
console.log("words from b58: " + words);

function wordToByte( words ){
	bytes = new Array();
	let bite;
	let upper;
	for(let i = 1; i < words.length; i+=2){
		// add lower bite.
		bite = words[i];
		// add upper 
		upper = words[i-1];
		if( upper >> 3 ){
			upper = upper - 8;
			bite = bite + 128;
		}
		if( upper >> 2 ){
			upper = upper - 4;
			bite = bite + 64;
		}
		if( upper >> 1 ){
			upper = upper - 2;
			bite = bite + 32;
		}
		if( upper ){
			bite = bite + 16;
		}
		bytes.push( bite );
	}
	return bytes;
}


function byteToWord( bytes ){
	words = new Array();
	let upper;
	let lower;
	let bite;

console.log("bytes: " + bytes);
	for(i in bytes) {
		bite = bytes[i];
		upper = 0;
		lower = 0;
		if( bite >> 7 ){ 
			upper += 8;
			bite = bite - 128;
		}
		if( bite >> 6 ){ 
			upper += 4;
			bite = bite - 64;
		}
		if( bite >> 5 ){ 
			upper += 2;
			bite = bite - 32;
		}
		if( bite >> 4 ){ 
			upper += 1;
			bite = bite - 16;
		}
		words.push(upper);
		words.push(bite);
	}
	return words;
}


// convert byte array to word array
// convert to base 58 (word)

function bin2String(array) {
  var result = "";
  for (var i = 0; i < array.length; i++) {
    result += String.fromCharCode(parseInt(array[i], 2));
  }
  return result;
}

function bToW ( byte_array ){
	words = new Array();

}

</script>

</body>

</html>
